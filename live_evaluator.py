import data_processor
import model_lib


if __name__ == "__main__":
    combined_set = data_processor.read_dataset("dataset.json")
    if combined_set is None:
        print("정제한 데이터셋이 존재하지 않습니다. 새로 생성합니다.")
        train_set = data_processor.process_dataset("TRAIN")
        valid_set = data_processor.process_dataset("VALID")
        combined_set = data_processor.combine_dataset(
            train_set,
            valid_set
        )
        data_processor.write_dataset("dataset.json", combined_set)
    combined_X = combined_set["data"]
    combined_y = combined_set["target"]

    while True:
        val = input("측정을 원하는 모델을 입력(유효하지 않은 값일 경우 프로세스 종료): ")
        model = model_lib.load_model(model=val, random_state=42)
        if model is None:
            print("유효하지 않은 값 입력됨. 프로세스 종료")
            break
        model_lib.evaluate_kfold(combined_X, combined_y, model)
